<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WebSynth</title>
    <style>
        * {
            font-family: monospace;
            color: white;
            cursor:url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg'  width='40' height='48' viewport='0 0 100 100' style='fill:black;font-size:24px;'><text y='50%'>🤔</text></svg>") 16 0,auto; /*!emojicursor.app*/
        }

        input:hover {
            cursor:url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg'  width='40' height='48' viewport='0 0 100 100' style='fill:black;font-size:24px;'><text y='50%'>😀</text></svg>") 16 0,auto;
        }

        a {
            color: rgb(130, 240, 57);
        }

        body {
            background-color: black;
        }

        marquee {
            background-color: rgb(255, 71, 47);
        }

        button {
            color: black;
        }

        select {
            background-color: black;
        }

        .channel {
            display: flex;
            flex-direction: row;
            justify-content: space-evenly;
        }

        .module {
            display: flex;
            flex-direction: column;
            border: 1px solid rgb(41, 233, 41);
            margin: 3px;
        }

    </style>
</head>
<body>
    <header>
        <marquee behavior="scroll" direction="right" class="banner" id="top-banner">
            <p>▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️</p>
        </marquee>
        <nav>
            <a href="/" target="_blank">new tab</a>
            👀
            <a href="/" target="_blank">new tab</a>
            ☢️
            <a href="/" target="_blank">new tab</a>
            🛢️
            <a href="/" target="_blank">new tab</a>
            🍕
            <a href="/" target="_blank">new tab</a>
            💬
            <a href="/" target="_blank">new tab</a>
            🍻
            <a href="/" target="_blank">new tab</a>
            👁️
            <a href="/" target="_blank">new tab</a>
            💀
            <a href="/" target="_blank">new tab</a>
            💧
            <a href="/" target="_blank">new tab</a>
            🌈
            <a href="/" target="_blank">new tab</a>
            🔥
            <a href="/" target="_blank">new tab</a>
            🌲
            <a href="/" target="_blank">new tab</a>
            ⭐
            <a href="/" target="_blank">new tab</a>
            🍄
            <a href="/" target="_blank">new tab</a>
            🎸
            <a href="/" target="_blank">new tab</a>
            😈
            <a href="/" target="_blank">new tab</a>
            👽
            <a href="/" target="_blank">new tab</a>
            🔪
            <a href="/" target="_blank">new tab</a>
            ✨
            <a href="/" target="_blank">new tab</a>
            🛀
            <a href="/" target="_blank">new tab</a>
            🪐
            <a href="/" target="_blank">new tab</a>
            🌑
            <a href="/" target="_blank">new tab</a>
            ☀️
            <a href="/" target="_blank">new tab</a>
        </nav>
    </header>

    <div class="controls">
        <div class="output channel">
            <p>1.</p>
            <div class="module volume">
                🔊
                <input class="vol" type="range" min="0" max="1" step="any" value="0">
            </div>
            <div class="module freq">
                🌊
                <input type="range" min="50" max="1000" step="any" value="500">
            </div>
            <div class="module shape">
                ⚒️
                <select class="wave-shape" name="wave-shape">
                    <option value="sine">~~~</option>
                    <option value="square">🟩</option>
                    <option value="triangle">📐</option>
                    <option value="sawtooth">🪚</option>
                </select>
            </div>
            <div class="module cut-off">
                ✂️
                <select class="filter-type" name="filter-type" value="bandpass">
                    <option value="lowpass">🪫</option>
                    <option value="highpass">🥴</option>
                    <option value="bandpass">🩹</option>
                </select>
                <input class="cut-off-freq" type="range" min="50" max="1000" step="any" value="500">
            </div>
            <div class="module pan">
                🍳
                <input type="range" min="-1" max="1" step="any" value="0">
            </div>
            <div class="module q">
                🇶
                <input type="range">
            </div>
            <div class="module phase">
                🌓
                <input type="range">
            </div>
            <div class="module delay">
                🚂
                <input type="range">
            </div>
        </div>

        <div class="output channel">
            <p>2.</p>
            <div class="module volume">
                🔊
                <input class="vol" type="range" min="0" max="1" step="any" value="0">
            </div>
            <div class="module freq">
                🌊
                <input type="range">
            </div>
            <div class="module shape">
                ⚒️
                <select class="wave-shape" name="wave-shape">
                    <option value="sine">~~~</option>
                    <option value="square">🟩</option>
                    <option value="triangle">📐</option>
                    <option value="sawtooth">🪚</option>
                </select>
            </div>
            <div class="module cut-off">
                ✂️
                <input type="range">
            </div>
            <div class="module pan">
                🍳
                <input type="range">
            </div>
            <div class="module q">
                🇶
                <input type="range">
            </div>
            <div class="module phase">
                🌓
                <input type="range">
            </div>
            <div class="module delay">
                🚂
                <input type="range">
            </div>
        </div>

        <div class="output channel">
            <p>3.</p>
            <div class="module volume">
                🔊
                <input class="vol" type="range" min="0" max="1" step="any" value="0">
            </div>
            <div class="module freq">
                🌊
                <input type="range">
            </div>
            <div class="module shape">
                ⚒️
                <select class="wave-shape" name="wave-shape">
                    <option value="sine">~~~</option>
                    <option value="square">🟩</option>
                    <option value="triangle">📐</option>
                    <option value="sawtooth">🪚</option>
                </select>
            </div>
            <div class="module cut-off">
                ✂️
                <input type="range">
            </div>
            <div class="module pan">
                🍳
                <input type="range">
            </div>
            <div class="module q">
                🇶
                <input type="range">
            </div>
            <div class="module phase">
                🌓
                <input type="range">
            </div>
            <div class="module delay">
                🚂
                <input type="range">
            </div>
        </div>

        <div class="output channel">
            <p>4.</p>
            <div class="module volume">
                🔊
                <input class="vol" type="range" min="0" max="1" step="any" value="0">
            </div>
            <div class="module freq">
                🌊
                <input type="range">
            </div>
            <div class="module shape">
                ⚒️
                <select class="wave-shape" name="wave-shape">
                    <option value="sine">~~~</option>
                    <option value="square">🟩</option>
                    <option value="triangle">📐</option>
                    <option value="sawtooth">🪚</option>
                </select>
            </div>
            <div class="module cut-off">
                ✂️
                <input type="range">
            </div>
            <div class="module pan">
                🍳
                <input type="range">
            </div>
            <div class="module q">
                🇶
                <input type="range">
            </div>
            <div class="module phase">
                🌓
                <input type="range">
            </div>
            <div class="module delay">
                🚂
                <input type="range">
            </div>
        </div>

        <div class="control channel">
            <div class="module lfo">
                🕹️
                <input type="range">
                <div class="checkboxes">
                    <input type="checkbox">
                    <input type="checkbox">
                    <input type="checkbox">
                    <input type="checkbox">
                </div>
                <select class="ctrl-param" name="ctrl-param">
                    <option value="volume">🔊</option>
                    <option value="frequency">🌊</option>
                    <option value="shape">⚒️</option>
                    <option value="pulse-width">💓</option>
                    <option value="cut-off">✂️</option>
                    <option value="pan">🍳</option>
                    <option value="q">🇶</option>
                    <option value="phase">🌓</option>
                    <option value="delay">🚂</option>
                </select>
            </div>
            <div class="module lfo">
                🕹️
                <input type="range">
                <div class="checkboxes">
                    <input type="checkbox">
                    <input type="checkbox">
                    <input type="checkbox">
                    <input type="checkbox">
                </div>
                <select class="ctrl-param" name="ctrl-param">
                    <option value="volume">🔊</option>
                    <option value="frequency">🌊</option>
                    <option value="shape">⚒️</option>
                    <option value="pulse-width">💓</option>
                    <option value="cut-off">✂️</option>
                    <option value="pan">🍳</option>
                    <option value="q">🇶</option>
                    <option value="phase">🌓</option>
                    <option value="delay">🚂</option>
                </select>
            </div>
            <div class="module lfo">
                🕹️
                <input type="range">
                <div class="checkboxes">
                    <input type="checkbox">
                    <input type="checkbox">
                    <input type="checkbox">
                    <input type="checkbox">
                </div>
                <select class="ctrl-param" name="ctrl-param">
                    <option value="volume">🔊</option>
                    <option value="frequency">🌊</option>
                    <option value="shape">⚒️</option>
                    <option value="pulse-width">💓</option>
                    <option value="cut-off">✂️</option>
                    <option value="pan">🍳</option>
                    <option value="q">🇶</option>
                    <option value="phase">🌓</option>
                    <option value="delay">🚂</option>
                </select>
            </div>
            <div class="module lfo">
                🕹️
                <input type="range">
                <div class="checkboxes">
                    <input type="checkbox">
                    <input type="checkbox">
                    <input type="checkbox">
                    <input type="checkbox">
                </div>
                <select class="ctrl-param" name="ctrl-param">
                    <option value="volume">🔊</option>
                    <option value="frequency">🌊</option>
                    <option value="shape">⚒️</option>
                    <option value="pulse-width">💓</option>
                    <option value="cut-off">✂️</option>
                    <option value="pan">🍳</option>
                    <option value="q">🇶</option>
                    <option value="phase">🌓</option>
                    <option value="delay">🚂</option>
                </select>
            </div>
            <div class="module lfo">
                🕹️
                <input type="range">
                <div class="checkboxes">
                    <input type="checkbox">
                    <input type="checkbox">
                    <input type="checkbox">
                    <input type="checkbox">
                </div>
                <select class="ctrl-param" name="ctrl-param">
                    <option value="volume">🔊</option>
                    <option value="frequency">🌊</option>
                    <option value="shape">⚒️</option>
                    <option value="pulse-width">💓</option>
                    <option value="cut-off">✂️</option>
                    <option value="pan">🍳</option>
                    <option value="q">🇶</option>
                    <option value="phase">🌓</option>
                    <option value="delay">🚂</option>
                </select>
            </div>
            <div class="module lfo">
                🕹️
                <input type="range">
                <div class="checkboxes">
                    <input type="checkbox">
                    <input type="checkbox">
                    <input type="checkbox">
                    <input type="checkbox">
                </div>
                <select class="ctrl-param" name="ctrl-param">
                    <option value="volume">🔊</option>
                    <option value="frequency">🌊</option>
                    <option value="shape">⚒️</option>
                    <option value="pulse-width">💓</option>
                    <option value="cut-off">✂️</option>
                    <option value="pan">🍳</option>
                    <option value="q">🇶</option>
                    <option value="phase">🌓</option>
                    <option value="delay">🚂</option>
                </select>
            </div>
            <div class="module lfo">
                🕹️
                <input type="range">
                <div class="checkboxes">
                    <input type="checkbox">
                    <input type="checkbox">
                    <input type="checkbox">
                    <input type="checkbox">
                </div>
                <select class="ctrl-param" name="ctrl-param">
                    <option value="volume">🔊</option>
                    <option value="frequency">🌊</option>
                    <option value="shape">⚒️</option>
                    <option value="pulse-width">💓</option>
                    <option value="cut-off">✂️</option>
                    <option value="pan">🍳</option>
                    <option value="q">🇶</option>
                    <option value="phase">🌓</option>
                    <option value="delay">🚂</option>
                </select>
            </div>
            <div class="module lfo">
                🕹️
                <input type="range">
                <div class="checkboxes">
                    <input type="checkbox">
                    <input type="checkbox">
                    <input type="checkbox">
                    <input type="checkbox">
                </div>
                <select class="ctrl-param" name="ctrl-param">
                    <option value="volume">🔊</option>
                    <option value="frequency">🌊</option>
                    <option value="shape">⚒️</option>
                    <option value="pulse-width">💓</option>
                    <option value="cut-off">✂️</option>
                    <option value="pan">🍳</option>
                    <option value="q">🇶</option>
                    <option value="phase">🌓</option>
                    <option value="delay">🚂</option>
                </select>
            </div>
            <div class="module lfo">
                🕹️
                <input type="range">
                <div class="checkboxes">
                    <input type="checkbox">
                    <input type="checkbox">
                    <input type="checkbox">
                    <input type="checkbox">
                </div>
                <select class="ctrl-param" name="ctrl-param">
                    <option value="volume">🔊</option>
                    <option value="frequency">🌊</option>
                    <option value="shape">⚒️</option>
                    <option value="pulse-width">💓</option>
                    <option value="cut-off">✂️</option>
                    <option value="pan">🍳</option>
                    <option value="q">🇶</option>
                    <option value="phase">🌓</option>
                    <option value="delay">🚂</option>
                </select>
            </div>
            <div class="module lfo">
                🕹️
                <input type="range">
                <div class="checkboxes">
                    <input type="checkbox">
                    <input type="checkbox">
                    <input type="checkbox">
                    <input type="checkbox">
                </div>
                <select class="ctrl-param" name="ctrl-param">
                    <option value="volume">🔊</option>
                    <option value="frequency">🌊</option>
                    <option value="shape">⚒️</option>
                    <option value="pulse-width">💓</option>
                    <option value="cut-off">✂️</option>
                    <option value="pan">🍳</option>
                    <option value="q">🇶</option>
                    <option value="phase">🌓</option>
                    <option value="delay">🚂</option>
                </select>
            </div>
            <div class="module lfo">
                🕹️
                <input type="range">
                <div class="checkboxes">
                    <input type="checkbox">
                    <input type="checkbox">
                    <input type="checkbox">
                    <input type="checkbox">
                </div>
                <select class="ctrl-param" name="ctrl-param">
                    <option value="volume">🔊</option>
                    <option value="frequency">🌊</option>
                    <option value="shape">⚒️</option>
                    <option value="pulse-width">💓</option>
                    <option value="cut-off">✂️</option>
                    <option value="pan">🍳</option>
                    <option value="q">🇶</option>
                    <option value="phase">🌓</option>
                    <option value="delay">🚂</option>
                </select>
            </div>
        </div>
    </div>

    <script>
        // Banner animation
        const banners = document.getElementsByClassName('banner');
        const bannerColours = [
            'rgb(255, 47, 203)',
            'rgb(78, 47, 255)',
            'rgb(47, 255, 245)',
            'rgb(82, 255, 47)',
            'rgb(255, 234, 47)',
            'rgb(255, 147, 47)',
            'rgb(255, 71, 47)'
        ];

        for (let i = 0; i < banners.length; i++){
            let j = 0;
            setInterval(() => {
                banners[i].style.backgroundColor = bannerColours[j];
                if(j < 7){
                    j++
                } else {
                    j = 0;
                }
            }, 200);
        }

        // Audio stuff
        const ctx = new AudioContext();
        let oscillators = [];
        let gainNodes = [];
        let filters = [];
        let stereoPannerNodes = [];

        const play = document.getElementById('top-banner');
        play.addEventListener("click", () => {
            for(let i = 0; i < 4; i++){
                oscillators[i] = ctx.createOscillator();
                oscillators[i].frequency.setValueAtTime(500, ctx.currentTime);

                gainNodes[i] = ctx.createGain();
                gainNodes[i].gain.setValueAtTime(0, ctx.currentTime);

                stereoPannerNodes[i] = ctx.createStereoPanner();

                filters[i] = ctx.createBiquadFilter();

                oscillators[i].connect(gainNodes[i]);
                gainNodes[i].connect(stereoPannerNodes[i]);
                stereoPannerNodes[i].connect(filters[i]);
                filters[i].connect(ctx.destination);
                oscillators[i].start();
            }
            play.innerHTML = "<p>⏹️⏹️⏹️⏹️⏹️⏹️⏹️⏹️⏹️⏹️⏹️⏹️⏹️⏹️⏹️⏹️⏹️⏹️⏹️⏹️⏹️⏹️⏹️⏹️⏹️⏹️⏹️⏹️⏹️⏹️⏹️⏹️⏹️⏹️⏹️⏹️⏹️⏹️⏹️⏹️⏹️⏹️⏹️⏹️⏹️⏹️⏹️⏹️⏹️</p>"
        })
        
        const volCtrls = document.getElementsByClassName('vol');
        console.log(volCtrls.length);
        for(let i = 0; i < volCtrls.length; i++){
            volCtrls[i].addEventListener("input", (e) => {
                gainNodes[i].gain.linearRampToValueAtTime(e.target.value, ctx.currentTime + 0.05);
            })
        } 

        const freqCtrls = document.getElementsByClassName('freq');
        for(let i = 0; i < freqCtrls.length; i++){
            freqCtrls[i].addEventListener("input", (e) => {
                oscillators[i].frequency.linearRampToValueAtTime(e.target.value, ctx.currentTime + 0.05);
            })
        } 

        const shapeCtrls = document.getElementsByClassName('shape');
        for(let i = 0; i < shapeCtrls.length; i++){
            shapeCtrls[i].addEventListener("change", (e) => {
                oscillators[i].type = e.target.value;
            })
        }
        
        const filterCtrls = document.getElementsByClassName('filter-type');
        const filterCutOffCtrls = document.getElementsByClassName('cut-off-freq');
        for(let i = 0; i < filterCtrls.length; i++){
            filterCtrls[i].addEventListener("change", (e) => {
                filters[i].type = e.target.value;
                filters[i].frequency.setValueAtTime(filterCutOffCtrls[i].value, ctx.currentTime + 0.05);
            })
            filterCutOffCtrls[i].addEventListener("input", (e) => {
                filters[i].type = filterCtrls[i].value;
                filters[i].frequency.setValueAtTime(e.target.value, ctx.currentTime + 0.05);
            })
        }

        const panCtrls = document.getElementsByClassName('pan');
        for(let i = 0; i < panCtrls.length; i++){
            panCtrls[i].addEventListener("input", (e) => {
                stereoPannerNodes[i].pan.setValueAtTime(e.target.value, ctx.currentTime + 0.05);
            })
        }

    </script>
</body>
</html>